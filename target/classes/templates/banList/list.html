<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Bans</title>
    <script>
        window.onload = function() {
            var errorMessage = document.getElementById('errorMessage');
            if (errorMessage && errorMessage.textContent.trim() !== '') {
                alert(errorMessage.textContent);
            }
        };
    </script>
</head>
<body>
<h3 id="errorMessage" th:text="${error_message}" style="display:none;"></h3>
<h1>Bans list</h1>
<form action="/banList" method="get">
    <label>
        User:
        <select name="user" th:value="${user}">
            <option th:text="None"
                    th:value="null"></option>
            <option th:each="option : ${users}"
                    th:value="${option.id}"
                    th:text="${option.id} + ' - ' + ${option.login} + ' - ' + ${option.nickname}"></option>

        </select>
    </label>

    <br>
    <label>
        Page:
        <input type="number" name="page" th:value="${ban_list.currentPage}">
    </label>
    <label>
        Page size:
        <input type="number" name="perPage" th:value="${ban_list.pageSize}" min="10">
    </label>

    <br>
    <label>
        Is permanent:
        <input type="checkbox" name="is_permanent">
    </label>
    <button type="submit">Search</button>
</form>
<br>
<br>
<ul>
    <h2>Bans:</h2>
    <th:block th:each="ban : ${ban_list.value}">
        <li>
            <span th:text="'User - ' + ${ban.user.id} + ' - ' + ${ban.user.login} + ' - ' + ${ban.user.nickname}"></span>
            <span th:text="'Ban expired - ' + ${ban.ban_expired}"></span>
            <span th:text="'is permanent - ' + ${ban.isPermanent}"></span>

            <form action="">
                <input type="hidden" th:value="ban.user.id" name="user">
                <button type="submit">Edit ban</button>
            </form>

            <a th:href="@{/banList/delete/{id}(id=${ban.id})}"
               onclick="return confirm('Вы уверены, что хотите удалить?');">Delete ban</a>
        </li>
    </th:block>
</ul>
</body>
</html>